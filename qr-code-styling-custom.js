/*! For license information please see qr-code-styling.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.QRCodeStyling=e():t.QRCodeStyling=e()}(this,(()=>(()=>{var t={873:(t,e)=>{var r,i,n=function(){var t=function(t,e){var r=t,i=o[e],n=null,s=0,h=null,p=[],w={},_=function(t,e){n=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var i=0;i<t;i+=1)e[r][i]=null}return e}(s=4*r+17),b(0,0),b(s-7,0),b(0,s-7),x(),v(),M(t,e),r>=7&&A(t),null==h&&(h=C(r,i,p)),S(h,e)},b=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||s<=t+r))for(var i=-1;i<=7;i+=1)e+i<=-1||s<=e+i||(n[t+r][e+i]=0<=r&&r<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=i&&i<=4)},v=function(){for(var t=8;t<s-8;t+=1)null==n[t][6]&&(n[t][6]=t%2==0);for(var e=8;e<s-8;e+=1)null==n[6][e]&&(n[6][e]=e%2==0)},x=function(){for(var t=a.getPatternPosition(r),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var s=t[e],o=t[i];if(null==n[s][o])for(var h=-2;h<=2;h+=1)for(var u=-2;u<=2;u+=1)n[s+h][o+u]=-2==h||2==h||-2==u||2==u||0==h&&0==u}},A=function(t){for(var e=a.getBCHTypeNumber(r),i=0;i<18;i+=1){var o=!t&&1==(e>>i&1);n[Math.floor(i/3)][i%3+s-8-3]=o}for(i=0;i<18;i+=1)o=!t&&1==(e>>i&1),n[i%3+s-8-3][Math.floor(i/3)]=o},M=function(t,e){for(var r=i<<3|e,o=a.getBCHTypeInfo(r),h=0;h<15;h+=1){var u=!t&&1==(o>>h&1);h<6?n[h][8]=u:h<8?n[h+1][8]=u:n[s-15+h][8]=u}for(h=0;h<15;h+=1)u=!t&&1==(o>>h&1),h<8?n[8][s-h-1]=u:h<9?n[8][15-h-1+1]=u:n[8][15-h-1]=u;n[s-8][8]=!t},S=function(t,e){for(var r=-1,i=s-1,o=7,h=0,u=a.getMaskFunction(e),l=s-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var c=0;c<2;c+=1)if(null==n[i][l-c]){var d=!1;h<t.length&&(d=1==(t[h]>>>o&1)),u(i,l-c)&&(d=!d),n[i][l-c]=d,-1==(o-=1)&&(h+=1,o=7)}if((i+=r)<0||s<=i){i-=r,r=-r;break}}},C=function(t,e,r){for(var i=l.getRSBlocks(t,e),n=c(),s=0;s<r.length;s+=1){var o=r[s];n.put(o.getMode(),4),n.put(o.getLength(),a.getLengthInBits(o.getMode(),t)),o.write(n)}var h=0;for(s=0;s<i.length;s+=1)h+=i[s].dataCount;if(n.getLengthInBits()>8*h)throw"code length overflow. ("+n.getLengthInBits()+">"+8*h+")";for(n.getLengthInBits()+4<=8*h&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*h||(n.put(236,8),n.getLengthInBits()>=8*h));)n.put(17,8);return function(t,e){for(var r=0,i=0,n=0,s=new Array(e.length),o=new Array(e.length),h=0;h<e.length;h+=1){var l=e[h].dataCount,c=e[h].totalCount-l;i=Math.max(i,l),n=Math.max(n,c),s[h]=new Array(l);for(var d=0;d<s[h].length;d+=1)s[h][d]=255&t.getBuffer()[d+r];r+=l;var g=a.getErrorCorrectPolynomial(c),m=u(s[h],g.getLength()-1).mod(g);for(o[h]=new Array(g.getLength()-1),d=0;d<o[h].length;d+=1){var f=d+m.getLength()-o[h].length;o[h][d]=f>=0?m.getAt(f):0}}var p=0;for(d=0;d<e.length;d+=1)p+=e[d].totalCount;var w=new Array(p),y=0;for(d=0;d<i;d+=1)for(h=0;h<e.length;h+=1)d<s[h].length&&(w[y]=s[h][d],y+=1);for(d=0;d<n;d+=1)for(h=0;h<e.length;h+=1)d<o[h].length&&(w[y]=o[h][d],y+=1);return w}(n,i)};w.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=d(t);break;case"Alphanumeric":r=g(t);break;case"Byte":r=m(t);break;case"Kanji":r=f(t);break;default:throw"mode:"+e}p.push(r),h=null},w.isDark=function(t,e){if(t<0||s<=t||e<0||s<=e)throw t+","+e;return n[t][e]},w.getModuleCount=function(){return s},w.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=l.getRSBlocks(t,i),n=c(),s=0;s<p.length;s++){var o=p[s];n.put(o.getMode(),4),n.put(o.getLength(),a.getLengthInBits(o.getMode(),t)),o.write(n)}var h=0;for(s=0;s<e.length;s++)h+=e[s].dataCount;if(n.getLengthInBits()<=8*h)break}r=t}_(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){_(!0,r);var i=a.getLostPoint(w);(0==r||t>i)&&(t=i,e=r)}return e}())},w.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var i=0;i<w.getModuleCount();i+=1){r+="<tr>";for(var n=0;n<w.getModuleCount();n+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=w.isDark(i,n)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return(r+="</tbody>")+"</table>"},w.createSvgTag=function(t,e,r,i){var n={};"object"==typeof arguments[0]&&(t=(n=arguments[0]).cellSize,e=n.margin,r=n.alt,i=n.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var s,o,a,h,u=w.getModuleCount()*t+2*e,l="";for(h="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=n.scalable?"":' width="'+u+'px" height="'+u+'px"',l+=' viewBox="0 0 '+u+" "+u+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=i.text||r.text?' role="img" aria-labelledby="'+$([i.id,r.id].join(" ").trim())+'"':"",l+=">",l+=i.text?'<title id="'+$(i.id)+'">'+$(i.text)+"</title>":"",l+=r.text?'<description id="'+$(r.id)+'">'+$(r.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',o=0;o<w.getModuleCount();o+=1)for(a=o*t+e,s=0;s<w.getModuleCount();s+=1)w.isDark(o,s)&&(l+="M"+(s*t+e)+","+a+h);return(l+='" stroke="transparent" fill="black"/>')+"</svg>"},w.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=w.getModuleCount()*t+2*e,i=e,n=r-e;return y(r,r,(function(e,r){if(i<=e&&e<n&&i<=r&&r<n){var s=Math.floor((e-i)/t),o=Math.floor((r-i)/t);return w.isDark(o,s)?0:1}return 1}))},w.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var i=w.getModuleCount()*t+2*e,n="";return n+="<img",n+=' src="',n+=w.createDataURL(t,e),n+='"',n+=' width="',n+=i,n+='"',n+=' height="',n+=i,n+='"',r&&(n+=' alt="',n+=$(r),n+='"'),n+"/>"};var $=function(t){for(var e="",r=0;r<t.length;r+=1){var i=t.charAt(r);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return w.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,r,i,n,s,o=1*w.getModuleCount()+2*t,a=t,h=o-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},l={"██":"▀","█ ":"▀"," █":" ","  ":" "},c="";for(e=0;e<o;e+=2){for(i=Math.floor((e-a)/1),n=Math.floor((e+1-a)/1),r=0;r<o;r+=1)s="█",a<=r&&r<h&&a<=e&&e<h&&w.isDark(i,Math.floor((r-a)/1))&&(s=" "),a<=r&&r<h&&a<=e+1&&e+1<h&&w.isDark(n,Math.floor((r-a)/1))?s+=" ":s+="█",c+=t<1&&e+1>=h?l[s]:u[s];c+="\n"}return o%2&&t>0?c.substring(0,c.length-o-1)+Array(o+1).join("▀"):c.substring(0,c.length-1)}(e);t-=1,e=void 0===e?2*t:e;var r,i,n,s,o=w.getModuleCount()*t+2*e,a=e,h=o-e,u=Array(t+1).join("██"),l=Array(t+1).join("  "),c="",d="";for(r=0;r<o;r+=1){for(n=Math.floor((r-a)/t),d="",i=0;i<o;i+=1)s=1,a<=i&&i<h&&a<=r&&r<h&&w.isDark(n,Math.floor((i-a)/t))&&(s=0),d+=s?u:l;for(n=0;n<t;n+=1)c+=d+"\n"}return c.substring(0,c.length-1)},w.renderTo2dContext=function(t,e){e=e||2;for(var r=w.getModuleCount(),i=0;i<r;i++)for(var n=0;n<r;n++)t.fillStyle=w.isDark(i,n)?"black":"white",t.fillRect(i*e,n*e,e,e)},w};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var i=t.charCodeAt(r);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=w(t),i=function(){var t=r.read();if(-1==t)throw"eof";return t},n=0,s={};;){var o=r.read();if(-1==o)break;var a=i(),h=i()<<8|i();s[String.fromCharCode(o<<8|a)]=h,n+=1}if(n!=e)throw n+" != "+e;return s}(),i="?".charCodeAt(0);return function(t){for(var e=[],n=0;n<t.length;n+=1){var s=t.charCodeAt(n);if(s<128)e.push(s);else{var o=r[t.charAt(n)];"number"==typeof o?(255&o)==o?e.push(o):(e.push(o>>>8),e.push(255&o)):e.push(i)}}return e}};var e,r,i,n,s,o={L:1,M:0,Q:3,H:2},a=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,i=7973,s=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;s(e)-s(r)>=0;)e^=r<<s(e)-s(r);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;s(e)-s(i)>=0;)e^=i<<s(e)-s(i);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return(t+e)%2==0};case 1:return function(t,e){return t%2==0};case 2:return function(t,e){return e%3==0};case 3:return function(t,e){return(t+e)%3==0};case 4:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case 5:return function(t,e){return t*e%2+t*e%3==0};case 6:return function(t,e){return(t*e%2+t*e%3)%2==0};case 7:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=u([1],0),r=0;r<t;r+=1)e=e.multiply(u([1,h.gexp(r)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i+=1)for(var n=0;n<e;n+=1){for(var s=0,o=t.isDark(i,n),a=-1;a<=1;a+=1)if(!(i+a<0||e<=i+a))for(var h=-1;h<=1;h+=1)n+h<0||e<=n+h||0==a&&0==h||o==t.isDark(i+a,n+h)&&(s+=1);s>5&&(r+=3+s-5)}for(i=0;i<e-1;i+=1)for(n=0;n<e-1;n+=1){var u=0;t.isDark(i,n)&&(u+=1),t.isDark(i+1,n)&&(u+=1),t.isDark(i,n+1)&&(u+=1),t.isDark(i+1,n+1)&&(u+=1),0!=u&&4!=u||(r+=3)}for(i=0;i<e;i+=1)for(n=0;n<e-6;n+=1)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(r+=40);for(n=0;n<e;n+=1)for(i=0;i<e-6;i+=1)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(r+=40);var l=0;for(n=0;n<e;n+=1)for(i=0;i<e;i+=1)t.isDark(i,n)&&(l+=1);return r+Math.abs(100*l/e/e-50)/5*10},n),h=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;return{glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}}}();function u(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var i=new Array(t.length-r+e),n=0;n<t.length-r;n+=1)i[n]=t[n+r];return i}(),i={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),r=0;r<i.getLength();r+=1)for(var n=0;n<t.getLength();n+=1)e[r+n]^=h.gexp(h.glog(i.getAt(r))+h.glog(t.getAt(n)));return u(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=h.glog(i.getAt(0))-h.glog(t.getAt(0)),r=new Array(i.getLength()),n=0;n<i.getLength();n+=1)r[n]=i.getAt(n);for(n=0;n<t.getLength();n+=1)r[n]^=h.gexp(h.glog(t.getAt(n))+e);return u(r,0).mod(t)}};return i}var l=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={getRSBlocks:function(r,i){var n=function(e,r){switch(r){case o.L:return t[4*(e-1)+0];case o.M:return t[4*(e-1)+1];case o.Q:return t[4*(e-1)+2];case o.H:return t[4*(e-1)+3];default:return}}(r,i);if(void 0===n)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+i;for(var s=n.length/3,a=[],h=0;h<s;h+=1)for(var u=n[3*h+0],l=n[3*h+1],c=n[3*h+2],d=0;d<u;d+=1)a.push(e(l,c));return a}};return r}(),c=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(r){var i=Math.floor(e/8);t.length<=i&&t.push(0),r&&(t[i]|=128>>>e%8),e+=1}};return r},d=function(t){var e=t,r={getMode:function(){return 1},getLength:function(t){return e.length},write:function(t){for(var r=e,n=0;n+2<r.length;)t.put(i(r.substring(n,n+3)),10),n+=3;n<r.length&&(r.length-n==1?t.put(i(r.substring(n,n+1)),4):r.length-n==2&&t.put(i(r.substring(n,n+2)),7))}},i=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+n(t.charAt(r));return e},n=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return r},g=function(t){var e=t,r={getMode:function(){return 2},getLength:function(t){return e.length},write:function(t){for(var r=e,n=0;n+1<r.length;)t.put(45*i(r.charAt(n))+i(r.charAt(n+1)),11),n+=2;n<r.length&&t.put(i(r.charAt(n)),6)}},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},m=function(e){var r=t.stringToBytes(e);return{getMode:function(){return 4},getLength:function(t){return r.length},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)}}},f=function(e){var r=t.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(){var t=r("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var i=r(e),n={getMode:function(){return 8},getLength:function(t){return~~(i.length/2)},write:function(t){for(var e=i,r=0;r+1<e.length;){var n=(255&e[r])<<8|255&e[r+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(r+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return n},p=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,i){r=r||0,i=i||t.length;for(var n=0;n<i;n+=1)e.writeByte(t[n+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+"]"}};return e},w=function(t){var e=t,r=0,i=0,n=0,s={read:function(){for(;n<8;){if(r>=e.length){if(0==n)return-1;throw"unexpected end of file./"+n}var t=e.charAt(r);if(r+=1,"="==t)return n=0,-1;t.match(/^\s$/)||(i=i<<6|o(t.charCodeAt(0)),n+=6)}var s=i>>>n-8&255;return n-=8,s}},o=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return s},y=function(t,e,r){for(var i=function(t,e){var r=t,i=e,n=new Array(t*e),s={setPixel:function(t,e,i){n[e*r+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(i),t.writeByte(0);var e=o(2);t.writeByte(2);for(var n=0;e.length-n>255;)t.writeByte(255),t.writeBytes(e,n,255),n+=255;t.writeByte(e.length-n),t.writeBytes(e,n,e.length-n),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,r=1+(1<<t),i=t+1,s=a(),o=0;o<e;o+=1)s.add(String.fromCharCode(o));s.add(String.fromCharCode(e)),s.add(String.fromCharCode(r));var h,u,l,c=p(),d=(h=c,u=0,l=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;u+e>=8;)h.writeByte(255&(t<<u|l)),e-=8-u,t>>>=8-u,l=0,u=0;l|=t<<u,u+=e},flush:function(){u>0&&h.writeByte(l)}});d.write(e,i);var g=0,m=String.fromCharCode(n[g]);for(g+=1;g<n.length;){var f=String.fromCharCode(n[g]);g+=1,s.contains(m+f)?m+=f:(d.write(s.indexOf(m),i),s.size()<4095&&(s.size()==1<<i&&(i+=1),s.add(m+f)),m=f)}return d.write(s.indexOf(m),i),d.write(r,i),d.flush(),c.toByteArray()},a=function(){var t={},e=0,r={add:function(i){if(r.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return s}(t,e),n=0;n<e;n+=1)for(var s=0;s<t;s+=1)i.setPixel(s,n,r(s,n));var o=p();i.write(o);for(var a=function(){var t=0,e=0,r=0,i="",n={},s=function(t){i+=String.fromCharCode(o(63&t))},o=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return n.writeByte=function(i){for(t=t<<8|255&i,e+=8,r+=1;e>=6;)s(t>>>e-6),e-=6},n.flush=function(){if(e>0&&(s(t<<6-e),t=0,e=0),r%3!=0)for(var n=3-r%3,o=0;o<n;o+=1)i+="="},n.toString=function(){return i},n}(),h=o.toByteArray(),u=0;u<h.length;u+=1)a.writeByte(h[u]);return a.flush(),"data:image/gif;base64,"+a};return t}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},void 0===(i="function"==typeof(r=function(){return n})?r.apply(e,[]):r)||(t.exports=i)}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};return(()=>{"use strict";r.d(i,{default:()=>Te});const t=t=>!!t&&"object"==typeof t&&!Array.isArray(t);function e(r,...i){if(!i.length)return r;const n=i.shift();return void 0!==n&&t(r)&&t(n)?(r=Object.assign({},r),Object.keys(n).forEach((i=>{const s=r[i],o=n[i];Array.isArray(s)&&Array.isArray(o)?r[i]=o:t(s)&&t(o)?r[i]=e(Object.assign({},s),o):r[i]=o})),e(r,...i)):r}function n(t,e){const r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}const s={L:.07,M:.15,Q:.25,H:.3};var o=Object.defineProperty,a=(t,e,r)=>((t,e,r)=>e in t?o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);const h={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},u=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every((t=>"number"==typeof t)))&&[6,16].some((e=>t.length===e)),l=t=>t instanceof DOMMatrix||t instanceof A||"object"==typeof t&&Object.keys(h).every((e=>t&&e in t)),c=t=>{const e=new A,r=Array.from(t);if(!u(r))throw TypeError(`CSSMatrix: "${r.join(",")}" must be an array with 6/16 numbers.`);if(16===r.length){const[t,i,n,s,o,a,h,u,l,c,d,g,m,f,p,w]=r;e.m11=t,e.a=t,e.m21=o,e.c=o,e.m31=l,e.m41=m,e.e=m,e.m12=i,e.b=i,e.m22=a,e.d=a,e.m32=c,e.m42=f,e.f=f,e.m13=n,e.m23=h,e.m33=d,e.m43=p,e.m14=s,e.m24=u,e.m34=g,e.m44=w}else if(6===r.length){const[t,i,n,s,o,a]=r;e.m11=t,e.a=t,e.m12=i,e.b=i,e.m21=n,e.c=n,e.m22=s,e.d=s,e.m41=o,e.e=o,e.m42=a,e.f=a}return e},d=t=>{if(l(t))return c([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},g=t=>{if("string"!=typeof t)throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let r=new A;const i=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter((t=>t)).forEach((t=>{const[e,n]=t.split("(");if(!n)throw TypeError(i);const s=n.split(",").map((t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))),[o,a,h,u]=s,l=[o,a,h],d=[o,a,h,u];if("perspective"===e&&o&&[a,h].every((t=>void 0===t)))r.m34=-1/o;else if(e.includes("matrix")&&[6,16].includes(s.length)&&s.every((t=>!Number.isNaN(+t)))){const t=s.map((t=>Math.abs(t)<1e-6?0:t));r=r.multiply(c(t))}else if("translate3d"===e&&l.every((t=>!Number.isNaN(+t))))r=r.translate(o,a,h);else if("translate"===e&&o&&void 0===h)r=r.translate(o,a||0,0);else if("rotate3d"===e&&d.every((t=>!Number.isNaN(+t)))&&u)r=r.rotateAxisAngle(o,a,h,u);else if("rotate"===e&&o&&[a,h].every((t=>void 0===t)))r=r.rotate(0,0,o);else if("scale3d"===e&&l.every((t=>!Number.isNaN(+t)))&&l.some((t=>1!==t)))r=r.scale(o,a,h);else if("scale"!==e||Number.isNaN(o)||1===o&&1===a||void 0!==h)if("skew"===e&&(o||!Number.isNaN(o)&&a)&&void 0===h)r=r.skew(o,a||0);else{if(!(["translate","rotate","scale","skew"].some((t=>e.includes(t)))&&/[XYZ]/.test(e)&&o&&[a,h].every((t=>void 0===t))))throw TypeError(i);if("skewX"===e||"skewY"===e)r=r[e](o);else{const t=e.replace(/[XYZ]/,""),i=e.replace(t,""),n=["X","Y","Z"].indexOf(i),s="scale"===t?1:0,a=[0===n?o:s,1===n?o:s,2===n?o:s];r=r[t](...a)}}else{const t=Number.isNaN(+a)?o:a;r=r.scale(o,t,1)}})),r},m=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],f=(t,e,r)=>{const i=new A;return i.m41=t,i.e=t,i.m42=e,i.f=e,i.m43=r,i},p=(t,e,r)=>{const i=new A,n=Math.PI/180,s=t*n,o=e*n,a=r*n,h=Math.cos(s),u=-Math.sin(s),l=Math.cos(o),c=-Math.sin(o),d=Math.cos(a),g=-Math.sin(a),m=l*d,f=-l*g;i.m11=m,i.a=m,i.m12=f,i.b=f,i.m13=c;const p=u*c*d+h*g;i.m21=p,i.c=p;const w=h*d-u*c*g;return i.m22=w,i.d=w,i.m23=-u*l,i.m31=u*g-h*c*d,i.m32=u*d+h*c*g,i.m33=h*l,i},w=(t,e,r,i)=>{const n=new A,s=Math.sqrt(t*t+e*e+r*r);if(0===s)return n;const o=t/s,a=e/s,h=r/s,u=i*(Math.PI/360),l=Math.sin(u),c=Math.cos(u),d=l*l,g=o*o,m=a*a,f=h*h,p=1-2*(m+f)*d;n.m11=p,n.a=p;const w=2*(o*a*d+h*l*c);n.m12=w,n.b=w,n.m13=2*(o*h*d-a*l*c);const y=2*(a*o*d-h*l*c);n.m21=y,n.c=y;const _=1-2*(f+g)*d;return n.m22=_,n.d=_,n.m23=2*(a*h*d+o*l*c),n.m31=2*(h*o*d+a*l*c),n.m32=2*(h*a*d-o*l*c),n.m33=1-2*(g+m)*d,n},y=(t,e,r)=>{const i=new A;return i.m11=t,i.a=t,i.m22=e,i.d=e,i.m33=r,i},_=(t,e)=>{const r=new A;if(t){const e=t*Math.PI/180,i=Math.tan(e);r.m21=i,r.c=i}if(e){const t=e*Math.PI/180,i=Math.tan(t);r.m12=i,r.b=i}return r},b=t=>_(t,0),v=t=>_(0,t),x=(t,e)=>{const r=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,i=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,n=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,s=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,o=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,a=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,h=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,u=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,l=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,d=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,g=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,m=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,f=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,p=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,w=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,y=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return c([r,i,n,s,o,a,h,u,l,d,g,m,f,p,w,y])};class A{constructor(t){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,t?this.setMatrixValue(t):this}get isIdentity(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m41&&0===this.m42&&0===this.m43&&1===this.m44}get is2D(){return 0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44}setMatrixValue(t){return"string"==typeof t&&t.length&&"none"!==t?g(t):Array.isArray(t)||t instanceof Float64Array||t instanceof Float32Array?c(t):"object"==typeof t?d(t):this}toFloat32Array(t){return Float32Array.from(m(this,t))}toFloat64Array(t){return Float64Array.from(m(this,t))}toString(){const{is2D:t}=this;return`${t?"matrix":"matrix3d"}(${this.toFloat64Array(t).join(", ")})`}toJSON(){const{is2D:t,isIdentity:e}=this;return{...this,is2D:t,isIdentity:e}}multiply(t){return x(this,t)}translate(t,e,r){let i=e,n=r;return typeof i>"u"&&(i=0),typeof n>"u"&&(n=0),x(this,f(t,i,n))}scale(t,e,r){let i=e,n=r;return typeof i>"u"&&(i=t),typeof n>"u"&&(n=1),x(this,y(t,i,n))}rotate(t,e,r){let i=t,n=e||0,s=r||0;return"number"==typeof t&&typeof e>"u"&&typeof r>"u"&&(s=i,i=0,n=0),x(this,p(i,n,s))}rotateAxisAngle(t,e,r,i){if([t,e,r,i].some((t=>Number.isNaN(+t))))throw new TypeError("CSSMatrix: expecting 4 values");return x(this,w(t,e,r,i))}skewX(t){return x(this,b(t))}skewY(t){return x(this,v(t))}skew(t,e){return x(this,_(t,e))}transformPoint(t){const e=this.m11*t.x+this.m21*t.y+this.m31*t.z+this.m41*t.w,r=this.m12*t.x+this.m22*t.y+this.m32*t.z+this.m42*t.w,i=this.m13*t.x+this.m23*t.y+this.m33*t.z+this.m43*t.w,n=this.m14*t.x+this.m24*t.y+this.m34*t.z+this.m44*t.w;return t instanceof DOMPoint?new DOMPoint(e,r,i,n):{x:e,y:r,z:i,w:n}}}a(A,"Translate",f),a(A,"Rotate",p),a(A,"RotateAxisAngle",w),a(A,"Scale",y),a(A,"SkewX",b),a(A,"SkewY",v),a(A,"Skew",_),a(A,"Multiply",x),a(A,"fromArray",c),a(A,"fromMatrix",d),a(A,"fromString",g),a(A,"toArray",m),a(A,"isCompatibleArray",u),a(A,"isCompatibleObject",l);var M=(t,e,r)=>{let[i,n]=t,[s,o]=e;return[i+(s-i)*r,n+(o-n)*r]},S=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),C=(t,e,r,i)=>S([t,e],[r,i]),$=(t,e,r,i,n)=>{let s={x:t,y:e};if("number"==typeof n){let o=S([t,e],[r,i]);if(n<=0)s={x:t,y:e};else if(n>=o)s={x:r,y:i};else{let[a,h]=M([t,e],[r,i],n/o);s={x:a,y:h}}}return s},k=(t,e,r,i)=>{let{min:n,max:s}=Math;return[n(t,r),n(e,i),s(t,r),s(e,i)]},z={getLineBBox:k,getLineLength:C,getPointAtLineLength:$},D=(t,e,r)=>{let i=r/2,n=t**2*Math.sin(i)**2,s=e**2*Math.cos(i)**2,o=Math.sqrt(n+s)*r;return Math.abs(o)},O=(t,e,r,i,n,s)=>{let{sin:o,cos:a}=Math,h=a(n),u=o(n),l=r*a(s),c=i*o(s);return[t+h*l-u*c,e+u*l+h*c]},P=(t,e)=>{let{x:r,y:i}=t,{x:n,y:s}=e,o=r*n+i*s,a=Math.sqrt((r**2+i**2)*(n**2+s**2));return(r*s-i*n<0?-1:1)*Math.acos(o/a)},N=(t,e,r,i,n,s,o,a,h)=>{let{abs:u,sin:l,cos:c,sqrt:d,PI:g}=Math,m=u(r),f=u(i),p=(n%360+360)%360*(g/180);if(t===a&&e===h)return{rx:m,ry:f,startAngle:0,endAngle:0,center:{x:a,y:h}};if(0===m||0===f)return{rx:m,ry:f,startAngle:0,endAngle:0,center:{x:(a+t)/2,y:(h+e)/2}};let w=(t-a)/2,y=(e-h)/2,_=c(p)*w+l(p)*y,b=-l(p)*w+c(p)*y,v=_**2/m**2+b**2/f**2;v>1&&(m*=d(v),f*=d(v));let x=(m**2*f**2-m**2*b**2-f**2*_**2)/(m**2*b**2+f**2*_**2);x=x<0?0:x;let A=(s!==o?1:-1)*d(x),M=A*(m*b/f),S=A*(-f*_/m),C={x:c(p)*M-l(p)*S+(t+a)/2,y:l(p)*M+c(p)*S+(e+h)/2},$={x:(_-M)/m,y:(b-S)/f},k=P({x:1,y:0},$),z=P($,{x:(-_-M)/m,y:(-b-S)/f});return!o&&z>0?z-=2*g:o&&z<0&&(z+=2*g),z%=2*g,{center:C,startAngle:k,endAngle:k+z,rx:m,ry:f}},L=(t,e,r,i,n,s,o,a,h)=>{let{rx:u,ry:l,startAngle:c,endAngle:d}=N(t,e,r,i,n,s,o,a,h);return D(u,l,d-c)},q=(t,e,r,i,n,s,o,a,h,u)=>{let l={x:t,y:e},{center:c,rx:d,ry:g,startAngle:m,endAngle:f}=N(t,e,r,i,n,s,o,a,h);if("number"==typeof u){let r=D(d,g,f-m);if(u<=0)l={x:t,y:e};else if(u>=r)l={x:a,y:h};else{if(t===a&&e===h)return{x:a,y:h};if(0===d||0===g)return $(t,e,a,h,u);let{PI:i,cos:s,sin:o}=Math,p=(n%360+360)%360*(i/180),w=m+u/r*(f-m),y=d*s(w),_=g*o(w);l={x:s(p)*y-o(p)*_+c.x,y:o(p)*y+s(p)*_+c.y}}}return l},B=(t,e,r,i,n,s,o,a,h)=>{let{center:u,rx:l,ry:c,startAngle:d,endAngle:g}=N(t,e,r,i,n,s,o,a,h),m=g-d,{min:f,max:p,tan:w,atan2:y,PI:_}=Math,{x:b,y:v}=u,x=n*_/180,A=w(x),M=y(-c*A,l),S=M,C=M+_,$=y(c,l*A),k=$+_,z=[a],D=[h],P=f(t,a),L=p(t,a),q=f(e,h),B=p(e,h),I=O(b,v,l,c,x,g-1e-5*m),j=O(b,v,l,c,x,g-.99999*m);if(I[0]>L||j[0]>L){let t=O(b,v,l,c,x,S);z.push(t[0]),D.push(t[1])}if(I[0]<P||j[0]<P){let t=O(b,v,l,c,x,C);z.push(t[0]),D.push(t[1])}if(I[1]<q||j[1]<q){let t=O(b,v,l,c,x,k);z.push(t[0]),D.push(t[1])}if(I[1]>B||j[1]>B){let t=O(b,v,l,c,x,$);z.push(t[0]),D.push(t[1])}return P=f.apply([],z),q=f.apply([],D),L=p.apply([],z),B=p.apply([],D),[P,q,L,B]},I={angleBetween:P,arcLength:D,arcPoint:O,getArcBBox:B,getArcLength:L,getArcProps:N,getPointAtArcLength:q},j=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],E=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],T=t=>{let e=[];for(let r=t,i=r.length,n=i-1;i>1;i-=1,n-=1){let t=[];for(let e=0;e<n;e+=1)t.push({x:n*(r[e+1].x-r[e].x),y:n*(r[e+1].y-r[e].y),t:0});e.push(t),r=t}return e},R=(t,e)=>{if(0===e)return t[0].t=0,t[0];let r=t.length-1;if(1===e)return t[r].t=1,t[r];let i=1-e,n=t;if(0===r)return t[0].t=e,t[0];if(1===r)return{x:i*n[0].x+e*n[1].x,y:i*n[0].y+e*n[1].y,t:e};let s=i*i,o=e*e,a=0,h=0,u=0,l=0;return 2===r?(n=[n[0],n[1],n[2],{x:0,y:0}],a=s,h=i*e*2,u=o):3===r&&(a=s*i,h=s*e*3,u=i*o*3,l=e*o),{x:a*n[0].x+h*n[1].x+u*n[2].x+l*n[3].x,y:a*n[0].y+h*n[1].y+u*n[2].y+l*n[3].y,t:e}},G=(t,e)=>{let r=t(e),i=r.x*r.x+r.y*r.y;return Math.sqrt(i)},Q=t=>{let e=j.length,r=0;for(let i,n=0;n<e;n++)i=.5*j[n]+.5,r+=E[n]*G(t,i);return.5*r},Z=t=>{let e=[];for(let r=0,i=t.length,n=2;r<i;r+=n)e.push({x:t[r],y:t[r+1]});let r=T(e);return Q((t=>R(r[0],t)))},V=([t,e,r])=>{let i=Math.min(t,r),n=Math.max(t,r);if(e>=t?r>=e:r<=e)return[i,n];let s=(t*r-e*e)/(t-2*e+r);return s<i?[s,n]:[i,s]},U=([t,e,r,i])=>{let n=t-3*e+3*r-i;if(Math.abs(n)<1e-8)return t===i&&t===e?[t,i]:V([t,-.5*t+1.5*e,t-3*e+3*r]);let s=-t*r+t*i-e*r-e*i+e*e+r*r;if(s<=0)return[Math.min(t,i),Math.max(t,i)];let o=Math.sqrt(s),a=Math.min(t,i),h=Math.max(t,i),u=t-2*e+r;for(let s=(u+o)/n,l=1;l<=2;s=(u-o)/n,l++)if(s>0&&s<1){let n=t*(1-s)*(1-s)*(1-s)+3*e*(1-s)*(1-s)*s+3*r*(1-s)*s*s+i*s*s*s;n<a&&(a=n),n>h&&(h=n)}return[a,h]},H={bezierLength:Q,calculateBezier:G,CBEZIER_MINMAX_EPSILON:1e-8,computeBezier:R,Cvalues:E,deriveBezier:T,getBezierLength:Z,minmaxC:U,minmaxQ:V,Tvalues:j},F=([t,e,r,i,n,s,o,a],h)=>{let u=1-h;return{x:u**3*t+3*u**2*h*r+3*u*h**2*n+h**3*o,y:u**3*e+3*u**2*h*i+3*u*h**2*s+h**3*a}},X=(t,e,r,i,n,s,o,a)=>Z([t,e,r,i,n,s,o,a]),Y=(t,e,r,i,n,s,o,a,h)=>{let u={x:t,y:e};if("number"==typeof h){let l=Z([t,e,r,i,n,s,o,a]);h<=0||(u=h>=l?{x:o,y:a}:F([t,e,r,i,n,s,o,a],h/l))}return u},W=(t,e,r,i,n,s,o,a)=>{let h=U([t,r,n,o]),u=U([e,i,s,a]);return[h[0],u[0],h[1],u[1]]},J={getCubicBBox:W,getCubicLength:X,getPointAtCubicLength:Y,getPointAtCubicSegmentLength:F},K=([t,e,r,i,n,s],o)=>{let a=1-o;return{x:a**2*t+2*a*o*r+o**2*n,y:a**2*e+2*a*o*i+o**2*s}},tt=(t,e,r,i,n,s)=>Z([t,e,r,i,n,s]),et=(t,e,r,i,n,s,o)=>{let a={x:t,y:e};if("number"==typeof o){let h=Z([t,e,r,i,n,s]);o<=0||(a=o>=h?{x:n,y:s}:K([t,e,r,i,n,s],o/h))}return a},rt=(t,e,r,i,n,s)=>{let o=V([t,r,n]),a=V([e,i,s]);return[o[0],a[0],o[1],a[1]]},it={getPointAtQuadLength:et,getPointAtQuadSegmentLength:K,getQuadBBox:rt,getQuadLength:tt},nt={polygonArea:t=>{let e,r=t.length,i=-1,n=t[r-1],s=0;for(;++i<r;)e=n,n=t[i],s+=e[1]*n[0]-e[0]*n[1];return s/2},polygonLength:t=>t.reduce(((e,r,i)=>i?e+S(t[i-1],r):0),0)},st=(t,e,r)=>{let{sin:i,cos:n}=Math;return{x:t*n(r)-e*i(r),y:t*i(r)+e*n(r)}},ot=(t,e)=>{let r=e>=1?10**e:1;return e>0?Math.round(t*r)/r:Math.round(t)},at={origin:[0,0,0],round:4},ht={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},ut=t=>{let e=t.pathValue[t.segmentStart],r=e.toLowerCase(),{data:i}=t;for(;i.length>=ht[r]&&("m"===r&&i.length>2?(t.segments.push([e].concat(i.splice(0,2))),r="l",e="m"===e?"l":"L"):t.segments.push([e].concat(i.splice(0,ht[r]))),ht[r]););},lt="SVGPathCommander Error",ct=t=>{let{index:e,pathValue:r}=t,i=r.charCodeAt(e);return 48===i?(t.param=0,void(t.index+=1)):49===i?(t.param=1,void(t.index+=1)):void(t.err=`${lt}: invalid Arc flag "${r[e]}", expecting 0 or 1 at index ${e}`)},dt=t=>t>=48&&t<=57,gt="Invalid path value",mt=t=>{let e,{max:r,pathValue:i,index:n}=t,s=n,o=!1,a=!1,h=!1,u=!1;if(s>=r)t.err=`${lt}: ${gt} at index ${s}, "pathValue" is missing param`;else if(e=i.charCodeAt(s),(43===e||45===e)&&(s+=1,e=i.charCodeAt(s)),dt(e)||46===e){if(46!==e){if(o=48===e,s+=1,e=i.charCodeAt(s),o&&s<r&&e&&dt(e))return void(t.err=`${lt}: ${gt} at index ${n}, "${i[n]}" illegal number`);for(;s<r&&dt(i.charCodeAt(s));)s+=1,a=!0;e=i.charCodeAt(s)}if(46===e){for(u=!0,s+=1;dt(i.charCodeAt(s));)s+=1,h=!0;e=i.charCodeAt(s)}if(101===e||69===e){if(u&&!a&&!h)return void(t.err=`${lt}: ${gt} at index ${s}, "${i[s]}" invalid float exponent`);if(s+=1,e=i.charCodeAt(s),(43===e||45===e)&&(s+=1),!(s<r&&dt(i.charCodeAt(s))))return void(t.err=`${lt}: ${gt} at index ${s}, "${i[s]}" invalid integer exponent`);for(;s<r&&dt(i.charCodeAt(s));)s+=1}t.index=s,t.param=+t.pathValue.slice(n,s)}else t.err=`${lt}: ${gt} at index ${s}, "${i[s]}" is not a number`},ft=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),pt=t=>{let{pathValue:e,max:r}=t;for(;t.index<r&&ft(e.charCodeAt(t.index));)t.index+=1},wt=t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}},yt=t=>dt(t)||43===t||45===t||46===t,_t=t=>97==(32|t),bt=t=>{switch(32|t){case 109:case 77:return!0;default:return!1}},vt=t=>{let{max:e,pathValue:r,index:i,segments:n}=t,s=r.charCodeAt(i),o=ht[r[i].toLowerCase()];if(t.segmentStart=i,!wt(s))return void(t.err=`${lt}: ${gt} "${r[i]}" is not a path command at index ${i}`);let a=n[n.length-1];if(bt(s)||"z"!==a?.[0]?.toLocaleLowerCase())if(t.index+=1,pt(t),t.data=[],o){for(;;){for(let i=o;i>0;i-=1){if(!_t(s)||3!==i&&4!==i?mt(t):ct(t),t.err.length)return;t.data.push(t.param),pt(t),t.index<e&&44===r.charCodeAt(t.index)&&(t.index+=1,pt(t))}if(t.index>=t.max||!yt(r.charCodeAt(t.index)))break}ut(t)}else ut(t);else t.err=`${lt}: ${gt} "${r[i]}" is not a MoveTo path command at index ${i}`},xt=class{constructor(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}},At=t=>{if("string"!=typeof t)return t.slice(0);let e=new xt(t);for(pt(e);e.index<e.max&&!e.err.length;)vt(e);if(e.err.length)throw TypeError(e.err);return e.segments.length&&(e.segments[0][0]="M"),e.segments},Mt=(t,e,r,i)=>{let[n]=t,s=n.toUpperCase();if(0===e||s===n)return t;if("A"===s)return[s,t[1],t[2],t[3],t[4],t[5],t[6]+r,t[7]+i];if("V"===s)return[s,t[1]+i];if("H"===s)return[s,t[1]+r];if("L"===s)return[s,t[1]+r,t[2]+i];{let e=[],n=t.length;for(let s=1;s<n;s+=1)e.push(t[s]+(s%2?r:i));return[s].concat(e)}},St=(t,e)=>{let r,i=t.length,n="M",s="M",o=!1,a=0,h=0,u=0,l=0,c=0;for(let d=0;d<i;d+=1){r=t[d],[n]=r,c=r.length,s=n.toUpperCase(),o=s!==n;let g=e(r,d,a,h);if(!1===g)break;"Z"===s?(a=u,h=l):"H"===s?a=r[1]+(o?a:0):"V"===s?h=r[1]+(o?h:0):(a=r[c-2]+(o?a:0),h=r[c-1]+(o?h:0),"M"===s&&(u=a,l=h)),g&&(t[d]=g,"C"===g[0]&&(i=t.length))}return t},Ct=t=>{let e=At(t);return St(e,Mt)},$t=(t,e,r,i)=>{let[n]=t,s=n.toLowerCase();if(0===e||n===s)return t;if("a"===s)return[s,t[1],t[2],t[3],t[4],t[5],t[6]-r,t[7]-i];if("v"===s)return[s,t[1]-i];if("h"===s)return[s,t[1]-r];if("l"===s)return[s,t[1]-r,t[2]-i];{let e=[],n=t.length;for(let s=1;s<n;s+=1)e.push(t[s]-(s%2?r:i));return[s].concat(e)}},kt=t=>{let e=At(t);return St(e,$t)},zt=(t,e,r,i,n,s,o,a,h,u)=>{let l,c,d,g,m,f=t,p=e,w=r,y=i,_=a,b=h,v=120*Math.PI/180,x=Math.PI/180*(+n||0),A=[];if(u)[c,d,g,m]=u;else{l=st(f,p,-x),f=l.x,p=l.y,l=st(_,b,-x),_=l.x,b=l.y;let t=(f-_)/2,e=(p-b)/2,r=t*t/(w*w)+e*e/(y*y);r>1&&(r=Math.sqrt(r),w*=r,y*=r);let i=w*w,n=y*y,a=(s===o?-1:1)*Math.sqrt(Math.abs((i*n-i*e*e-n*t*t)/(i*e*e+n*t*t)));g=a*w*e/y+(f+_)/2,m=a*-y*t/w+(p+b)/2,c=Math.asin(((p-m)/y*10**9|0)/10**9),d=Math.asin(((b-m)/y*10**9|0)/10**9),c=f<g?Math.PI-c:c,d=_<g?Math.PI-d:d,c<0&&(c=2*Math.PI+c),d<0&&(d=2*Math.PI+d),o&&c>d&&(c-=2*Math.PI),!o&&d>c&&(d-=2*Math.PI)}let M=d-c;if(Math.abs(M)>v){let t=d,e=_,r=b;d=c+v*(o&&d>c?1:-1),_=g+w*Math.cos(d),b=m+y*Math.sin(d),A=zt(_,b,w,y,n,0,o,e,r,[d,t,g,m])}M=d-c;let S=Math.cos(c),C=Math.sin(c),$=Math.cos(d),k=Math.sin(d),z=Math.tan(M/4),D=4/3*w*z,O=4/3*y*z,P=[f,p],N=[f+D*C,p-O*S],L=[_+D*k,b-O*$],q=[_,b];if(N[0]=2*P[0]-N[0],N[1]=2*P[1]-N[1],u)return[N[0],N[1],L[0],L[1],q[0],q[1]].concat(A);A=[N[0],N[1],L[0],L[1],q[0],q[1]].concat(A);let B=[];for(let t=0,e=A.length;t<e;t+=1)B[t]=t%2?st(A[t-1],A[t],x).y:st(A[t],A[t+1],x).x;return B},Dt=zt,Ot=(t,e,r,i,n,s)=>{let o=.3333333333333333,a=2/3;return[o*t+a*r,o*e+a*i,o*n+a*r,o*s+a*i,n,s]},Pt=(t,e,r,i)=>{let n=M([t,e],[r,i],.3333333333333333),s=M([t,e],[r,i],2/3);return[n[0],n[1],s[0],s[1],r,i]},Nt=(t,e)=>{let[r]=t,i=t.slice(1).map(Number),[n,s]=i,{x1:o,y1:a,x:h,y:u}=e;return"TQ".includes(r)||(e.qx=null,e.qy=null),"M"===r?(e.x=n,e.y=s,t):"A"===r?["C"].concat(Dt(o,a,i[0],i[1],i[2],i[3],i[4],i[5],i[6])):"Q"===r?(e.qx=n,e.qy=s,["C"].concat(Ot(o,a,i[0],i[1],i[2],i[3]))):"L"===r?["C"].concat(Pt(o,a,n,s)):"Z"===r?["C"].concat(Pt(o,a,h,u)):t},Lt=(t,e)=>{let[r]=t,i=r.toUpperCase(),n=r!==i,{x1:s,y1:o,x2:a,y2:h,x:u,y:l}=e,c=t.slice(1),d=c.map(((t,e)=>t+(n?e%2?l:u:0)));if("TQ".includes(i)||(e.qx=null,e.qy=null),"A"===i)return d=c.slice(0,-2).concat(c[5]+(n?u:0),c[6]+(n?l:0)),["A"].concat(d);if("H"===i)return["L",t[1]+(n?u:0),o];if("V"===i)return["L",s,t[1]+(n?l:0)];if("L"===i)return["L",t[1]+(n?u:0),t[2]+(n?l:0)];if("M"===i)return["M",t[1]+(n?u:0),t[2]+(n?l:0)];if("C"===i)return["C"].concat(d);if("S"===i){let t=2*s-a,r=2*o-h;return e.x1=t,e.y1=r,["C",t,r].concat(d)}if("T"===i){let t=2*s-(e.qx?e.qx:0),r=2*o-(e.qy?e.qy:0);return e.qx=t,e.qy=r,["Q",t,r].concat(d)}if("Q"===i){let[t,r]=d;return e.qx=t,e.qy=r,["Q"].concat(d)}return"Z"===i?["Z"]:t},qt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},Bt=t=>{let e={...qt},r=At(t);return St(r,((t,i,n,s)=>{e.x=n,e.y=s;let o=Lt(t,e),a=Nt(o,e);"C"===a[0]&&a.length>7&&(r.splice(i+1,0,["C"].concat(a.slice(7))),a=a.slice(0,7));let h=a.length;return e.x1=+a[h-2],e.y1=+a[h-1],e.x2=+a[h-4]||e.x1,e.y2=+a[h-3]||e.y1,a}))},It=(t,e)=>{let r=t.length,{round:i}=at,n=t[0],s="";i="off"===e||"number"==typeof e&&e>=0?e:"number"==typeof i&&i>=0?i:"off";for(let e=0;e<r;e+=1){n=t[e];let[r]=n,o=n.slice(1);if(s+=r,"off"===i)s+=o.join(" ");else{let t=0,e=o.length;for(;t<e;)s+=ot(o[t],i),t!==e-1&&(s+=" "),t+=1}}return s},jt=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};let e=At(t),r="M",i=0,n=0,{max:s,min:o}=Math,a=1/0,h=1/0,u=-1/0,l=-1/0,c=0,d=0,g=0,m=0,f=0,p=0,w=0,y=0,_=0,b=0;St(e,((t,e,v,x)=>{[r]=t;let A=r.toUpperCase(),M=A!==r?Mt(t,e,v,x):t.slice(0),S="V"===A?["L",v,M[1]]:"H"===A?["L",M[1],x]:M;if([r]=S,"TQ".includes(A)||(_=0,b=0),"M"===r)[,i,n]=S,c=i,d=n,g=i,m=n;else if("L"===r)[c,d,g,m]=k(v,x,S[1],S[2]);else if("A"===r)[c,d,g,m]=B(v,x,S[1],S[2],S[3],S[4],S[5],S[6],S[7]);else if("S"===r){let t=2*f-w,e=2*p-y;[c,d,g,m]=W(v,x,t,e,S[1],S[2],S[3],S[4])}else"C"===r?[c,d,g,m]=W(v,x,S[1],S[2],S[3],S[4],S[5],S[6]):"T"===r?(_=2*f-_,b=2*p-b,[c,d,g,m]=rt(v,x,_,b,S[1],S[2])):"Q"===r?(_=S[1],b=S[2],[c,d,g,m]=rt(v,x,S[1],S[2],S[3],S[4])):"Z"===r&&([c,d,g,m]=k(v,x,i,n));a=o(c,a),h=o(d,h),u=s(g,u),l=s(m,l),[f,p]="Z"===r?[i,n]:S.slice(-2),[w,y]="C"===r?[S[3],S[4]]:"S"===r?[S[1],S[2]]:[f,p]}));let v=u-a,x=l-h;return{width:v,height:x,x:a,y:h,x2:u,y2:l,cx:a+v/2,cy:h+x/2,cz:Math.max(v,x)+Math.min(v,x)/2}},Et=t=>{let e=At(t),r=0,i=0,n=0,s=0,o=0,a=0,h="M",u=0,l=0,c=0;return St(e,((t,e,d,g)=>{[h]=t;let m=h.toUpperCase(),f=m!==h?Mt(t,e,d,g):t.slice(0),p="V"===m?["L",d,f[1]]:"H"===m?["L",f[1],g]:f;[h]=p,"TQ".includes(m)||(o=0,a=0),"M"===h?[,u,l]=p:"L"===h?c+=C(d,g,p[1],p[2]):"A"===h?c+=L(d,g,p[1],p[2],p[3],p[4],p[5],p[6],p[7]):"S"===h?c+=X(d,g,2*r-n,2*i-s,p[1],p[2],p[3],p[4]):"C"===h?c+=X(d,g,p[1],p[2],p[3],p[4],p[5],p[6]):"T"===h?(o=2*r-o,a=2*i-a,c+=tt(d,g,o,a,p[1],p[2])):"Q"===h?(o=p[1],a=p[2],c+=tt(d,g,p[1],p[2],p[3],p[4])):"Z"===h&&(c+=C(d,g,u,l)),[r,i]="Z"===h?[u,l]:p.slice(-2),[n,s]="C"===h?[p[3],p[4]]:"S"===h?[p[1],p[2]]:[r,i]})),c},Tt=1e-5,Rt=t=>{let e=At(t),r={...qt};return St(e,((t,e,i,n)=>{r.x=i,r.y=n;let s=Lt(t,r),o=s.length;return r.x1=+s[o-2],r.y1=+s[o-1],r.x2=+s[o-4]||r.x1,r.y2=+s[o-3]||r.y1,s}))},Gt=(t,e)=>{let r=Rt(t),i=!1,n=[],s="M",o=0,a=0,[h,u]=r[0].slice(1),l={x:h,y:u},c=0,d=l,g=0;return"number"!=typeof e||e<Tt?l:(St(r,((t,r,m,f)=>{if([s]=t,i="M"===s,n=i?n:[m,f].concat(t.slice(1)),i?([,h,u]=t,l={x:h,y:u},c=0):"L"===s?(l=$(n[0],n[1],n[2],n[3],e-g),c=C(n[0],n[1],n[2],n[3])):"A"===s?(l=q(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],e-g),c=L(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])):"C"===s?(l=Y(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],e-g),c=X(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7])):"Q"===s?(l=et(n[0],n[1],n[2],n[3],n[4],n[5],e-g),c=tt(n[0],n[1],n[2],n[3],n[4],n[5])):"Z"===s&&(n=[m,f,h,u],l={x:h,y:u},c=C(n[0],n[1],n[2],n[3])),[o,a]=n.slice(-2),!(g<e))return!1;d=l,g+=c})),e>g-Tt?{x:o,y:a}:d)},Qt=(t,e)=>{let r=At(t),i=r.slice(0),n=Et(i),s=i.length-1,o=0,a=0,h=r[0];if(s<=0||!e||!Number.isFinite(e))return{segment:h,index:0,length:a,lengthAtSegment:o};if(e>=n)return i=r.slice(0,-1),o=Et(i),a=n-o,h=r[s],{segment:h,index:s,length:a,lengthAtSegment:o};let u=[];for(;s>0;)h=i[s],i=i.slice(0,-1),o=Et(i),a=n-o,n=o,u.push({segment:h,index:s,length:a,lengthAtSegment:o}),s-=1;return u.find((({lengthAtSegment:t})=>t<=e))},Zt=(t,e)=>{let r,i=At(t),n=Rt(i),s=Et(n),o=t=>{let r=t.x-e.x,i=t.y-e.y;return r*r+i*i},a=8,h={x:0,y:0},u=0,l=0,c=1/0;for(let t=0;t<=s;t+=a)r=Gt(n,t),u=o(r),u<c&&(h=r,l=t,c=u);a/=2;let d,g,m=0,f=0,p=0,w=0;for(;a>1e-6&&(m=l-a,d=Gt(n,m),p=o(d),f=l+a,g=Gt(n,f),w=o(g),m>=0&&p<c?(h=d,l=m,c=p):f<=s&&w<c?(h=g,l=f,c=w):a/=2,!(a<1e-5)););let y=Qt(i,l);return{closest:h,distance:Math.sqrt(c),segment:y}},Vt=(t,e)=>Zt(t,e).closest,Ut=t=>{let e=0,r=0,i=0;return Bt(t).map((t=>"M"===t[0]?([,e,r]=t,0):(i=((t,e,r,i,n,s,o,a)=>3*((a-e)*(r+n)-(o-t)*(i+s)+i*(t-n)-r*(e-s)+a*(n+t/3)-o*(s+e/3))/20)(e,r,t[1],t[2],t[3],t[4],t[5],t[6]),[e,r]=t.slice(-2),i))).reduce(((t,e)=>t+e),0)},Ht=t=>Ut(Bt(t))>=0,Ft=(t,e)=>Qt(t,e).segment,Xt=(t,e)=>Zt(t,e).segment,Yt=t=>Array.isArray(t)&&t.every((t=>{let e=t[0].toLowerCase();return ht[e]===t.length-1&&"achlmqstvz".includes(e)&&t.slice(1).every(Number.isFinite)}))&&t.length>0,Wt=t=>Yt(t)&&t.every((([t])=>t===t.toUpperCase())),Jt=t=>Wt(t)&&t.every((([t])=>"ACLMQZ".includes(t))),Kt=t=>Jt(t)&&t.every((([t])=>"MC".includes(t))),te=(t,e)=>{let{distance:r}=Zt(t,e);return Math.abs(r)<Tt},ee=t=>Yt(t)&&t.slice(1).every((([t])=>t===t.toLowerCase())),re=t=>{if("string"!=typeof t||!t.length)return!1;let e=new xt(t);for(pt(e);e.index<e.max&&!e.err.length;)vt(e);return!e.err.length&&"mM".includes(e.segments[0][0])},ie={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},ne=t=>null!=t&&"object"==typeof t&&1===t.nodeType,se=t=>{let e=Object.keys(ie),r=ne(t),i=r?t.tagName:null;if(i&&[...e,"path"].every((t=>i!==t)))throw TypeError(`${lt}: "${i}" is not SVGElement`);let n=r?i:t.type,s={type:n};r?ie[n].forEach((e=>{s[e]=t.getAttribute(e)})):Object.assign(s,t);let o=[];return"circle"===n?o=(t=>{let{cx:e,cy:r,r:i}=t;return[e,r,i]=[e,r,i].map((t=>+t)),[["M",e-i,r],["a",i,i,0,1,0,2*i,0],["a",i,i,0,1,0,-2*i,0]]})(s):"ellipse"===n?o=(t=>{let{cx:e,cy:r}=t,i=t.rx||0,n=t.ry||i;return[e,r,i,n]=[e,r,i,n].map((t=>+t)),[["M",e-i,r],["a",i,n,0,1,0,2*i,0],["a",i,n,0,1,0,-2*i,0]]})(s):["polyline","polygon"].includes(n)?o=(t=>{let e=[],r=(t.points||"").trim().split(/[\s|,]/).map((t=>+t)),i=0;for(;i<r.length;)e.push([i?"L":"M",r[i],r[i+1]]),i+=2;return"polygon"===t.type?[...e,["z"]]:e})(s):"rect"===n?o=(t=>{let e=+t.x||0,r=+t.y||0,i=+t.width,n=+t.height,s=+(t.rx||0),o=+(t.ry||s);return s||o?(2*s>i&&(s-=(2*s-i)/2),2*o>n&&(o-=(2*o-n)/2),[["M",e+s,r],["h",i-2*s],["s",s,0,s,o],["v",n-2*o],["s",0,o,-s,o],["h",2*s-i],["s",-s,0,-s,-o],["v",2*o-n],["s",0,-o,s,-o]]):[["M",e,r],["h",i],["v",n],["H",e],["Z"]]})(s):"line"===n?o=(t=>{let{x1:e,y1:r,x2:i,y2:n}=t;return[e,r,i,n]=[e,r,i,n].map((t=>+t)),[["M",e,r],["L",i,n]]})(s):["glyph","path"].includes(n)&&(o=At(r?t.getAttribute("d")||"":t.d||"")),!(!Yt(o)||!o.length)&&o},oe=(t,e,r)=>{let i=r||document,n=Object.keys(ie),s=ne(t),o=s?t.tagName:null;if("path"===o)throw TypeError(`${lt}: "${o}" is already SVGPathElement`);if(o&&n.every((t=>o!==t)))throw TypeError(`${lt}: "${o}" is not SVGElement`);let a=i.createElementNS("http://www.w3.org/2000/svg","path"),h=s?o:t.type,u=ie[h],l={type:h},c=at.round,d=se(t),g=d&&d.length?It(d,c):"";return s?(u.forEach((e=>{l[e]=t.getAttribute(e)})),Object.values(t.attributes).forEach((({name:t,value:e})=>{u.includes(t)||a.setAttribute(t,e)}))):(Object.assign(l,t),Object.keys(l).forEach((t=>{!u.includes(t)&&"type"!==t&&a.setAttribute(t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)),l[t])}))),!!re(g)&&(a.setAttribute("d",g),e&&s&&(t.before(a,t),t.remove()),a)},ae=(t,e,r,i)=>{let[n]=t,{round:s}=at,o="number"==typeof s?s:4,a=e.slice(1),{x1:h,y1:u,x2:l,y2:c,x:d,y:g}=r,[m,f]=a.slice(-2),p=t;if("TQ".includes(n)||(r.qx=null,r.qy=null),"L"===n){if(ot(d,o)===ot(m,o))return["V",f];if(ot(g,o)===ot(f,o))return["H",m]}else if("C"===n){let[t,e]=a;if(r.x1=t,r.y1=e,"CS".includes(i)&&(ot(t,o)===ot(2*h-l,o)&&ot(e,o)===ot(2*u-c,o)||ot(h,o)===ot(2*l-d,o)&&ot(u,o)===ot(2*c-g,o)))return["S",a[2],a[3],a[4],a[5]]}else if("Q"===n){let[t,e]=a;if(r.qx=t,r.qy=e,"QT".includes(i)&&ot(t,o)===ot(2*h-l,o)&&ot(e,o)===ot(2*u-c,o))return["T",a[2],a[3]]}return p},he=(t,e)=>{let r=t.slice(1).map((t=>ot(t,e)));return[t[0]].concat(r)},ue=(t,e)=>{let r=Ct(t),i="number"==typeof e&&e>=0?e:2,n={...qt},s=[],o="M",a="Z";return St(r,((t,e,r,h)=>{n.x=r,n.y=h;let u=Lt(t,n),l=t;if([o]=t,s[e]=o,e){a=s[e-1];let o=ae(t,u,n,a),c=he(o,i),d=c.join(""),g=$t(o,e,r,h),m=he(g,i),f=m.join("");l=d.length<f.length?c:m}let c=u.length;return n.x1=+u[c-2],n.y1=+u[c-1],n.x2=+u[c-4]||n.x1,n.y2=+u[c-3]||n.y1,l}))},le=t=>{let e=Ct(t),r=Rt(e),i=e.length,n="Z"===e[i-1][0],s=St(e,((t,s)=>{let o=r[s],a=s&&e[s-1],h=a&&a[0],u=e[s+1],l=u&&u[0],[c]=t,[d,g]=r[s?s-1:i-1].slice(-2),m=t;switch(c){case"M":m=n?["Z"]:[c,d,g];break;case"A":m=[c,t[1],t[2],t[3],t[4],1===t[5]?0:1,d,g];break;case"C":m=u&&"S"===l?["S",t[1],t[2],d,g]:[c,t[3],t[4],t[1],t[2],d,g];break;case"S":m=!h||!"CS".includes(h)||u&&"S"===l?[c,o[1],o[2],d,g]:["C",o[3],o[4],o[1],o[2],d,g];break;case"Q":m=u&&"T"===l?["T",d,g]:[c,t[1],t[2],d,g];break;case"T":m=!h||!"QT".includes(h)||u&&"T"===l?[c,d,g]:["Q",o[1],o[2],d,g];break;case"Z":m=["M",d,g];break;case"H":m=[c,d];break;case"V":m=[c,g];break;default:m=[c].concat(t.slice(1,-2),d,g)}return m}));return n?s.reverse():[s[0]].concat(s.slice(1).reverse())},ce=t=>{let e,r=[],i=-1,n=0,s=0,o=0,a=0,h={...qt};return t.forEach((t=>{let[u]=t,l=u.toUpperCase(),c=u.toLowerCase(),d=u===c,g=t.slice(1);"M"===l?(i+=1,[n,s]=g,n+=d?h.x:0,s+=d?h.y:0,o=n,a=s,e=[d?[l,o,a]:t]):("Z"===l?(n=o,s=a):"H"===l?([,n]=t,n+=d?h.x:0):"V"===l?([,s]=t,s+=d?h.y:0):([n,s]=t.slice(-2),n+=d?h.x:0,s+=d?h.y:0),e.push(t)),h.x=n,h.y=s,r[i]=e})),r},de=t=>{let e=new A,{origin:r}=t,[i,n]=r,{translate:s}=t,{rotate:o}=t,{skew:a}=t,{scale:h}=t;return Array.isArray(s)&&s.length>=2&&s.every((t=>!Number.isNaN(+t)))&&s.some((t=>0!==t))?e=e.translate(...s):"number"==typeof s&&!Number.isNaN(s)&&(e=e.translate(s)),(o||a||h)&&(e=e.translate(i,n),Array.isArray(o)&&o.length>=2&&o.every((t=>!Number.isNaN(+t)))&&o.some((t=>0!==t))?e=e.rotate(...o):"number"==typeof o&&!Number.isNaN(o)&&(e=e.rotate(o)),Array.isArray(a)&&2===a.length&&a.every((t=>!Number.isNaN(+t)))&&a.some((t=>0!==t))?(e=a[0]?e.skewX(a[0]):e,e=a[1]?e.skewY(a[1]):e):"number"==typeof a&&!Number.isNaN(a)&&(e=e.skewX(a)),Array.isArray(h)&&h.length>=2&&h.every((t=>!Number.isNaN(+t)))&&h.some((t=>1!==t))?e=e.scale(...h):"number"==typeof h&&!Number.isNaN(h)&&(e=e.scale(h)),e=e.translate(-i,-n)),e},ge=(t,e,r)=>{let[i,n,s]=r,[o,a,h]=((t,e)=>{let r=A.Translate(e[0],e[1],e[2]);return[,,,r.m44]=e,r=t.multiply(r),[r.m41,r.m42,r.m43,r.m44]})(t,[e[0],e[1],0,1]),u=a-n,l=h-s;return[(o-i)*(Math.abs(s)/Math.abs(l)||1)+i,u*(Math.abs(s)/Math.abs(l)||1)+n]},me=(t,e)=>{let r=0,i=0,n=0,s=0,o=0,a=0,h="M",u=At(t),l=e&&Object.keys(e);if(!e||l&&!l.length)return u.slice(0);e.origin||Object.assign(e,{origin:at.origin});let c=e.origin,d=de(e);return d.isIdentity?u.slice(0):St(u,((t,e,l,g)=>{[h]=t;let m=h.toUpperCase(),f=m!==h?Mt(t,e,l,g):t.slice(0),p="A"===m?["C"].concat(Dt(l,g,f[1],f[2],f[3],f[4],f[5],f[6],f[7])):"V"===m?["L",l,f[1]]:"H"===m?["L",f[1],g]:f;h=p[0];let w="C"===h&&p.length>7,y=w?p.slice(0,7):p.slice(0);if(w&&(u.splice(e+1,0,["C"].concat(p.slice(7))),p=y),"L"===h)[n,s]=ge(d,[p[1],p[2]],c),r!==n&&i!==s?p=["L",n,s]:i===s?p=["H",n]:r===n&&(p=["V",s]);else for(o=1,a=p.length;o<a;o+=2)[n,s]=ge(d,[+p[o],+p[o+1]],c),p[o]=n,p[o+1]=s;return r=n,i=s,p}))},fe=t=>{let e=t.slice(1).map(((e,r,i)=>r?i[r-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1)))).map((t=>t.map(((e,r)=>t[t.length-r-2*(1-r%2)])))).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map((t=>["C"].concat(t.slice(2)))))},pe=(t,e)=>{let{round:r}=at;return r="off"===e||"number"==typeof e&&e>=0?e:"number"==typeof r&&r>=0?r:"off","off"===r?t.slice(0):St(t,(t=>he(t,r)))},we=(t,e=.5)=>{let r=e,i=t.slice(0,2),n=t.slice(2,4),s=t.slice(4,6),o=t.slice(6,8),a=M(i,n,r),h=M(n,s,r),u=M(s,o,r),l=M(a,h,r),c=M(h,u,r),d=M(l,c,r);return[["C",a[0],a[1],l[0],l[1],d[0],d[1]],["C",c[0],c[1],u[0],u[1],o[0],o[1]]]},ye=class{constructor(t,e){let r=e||{},i=typeof t>"u";if(i||!t.length)throw TypeError(`${lt}: "pathValue" is ${i?"undefined":"empty"}`);this.segments=At(t);let n,{round:s,origin:o}=r;n=Number.isInteger(s)||"off"===s?s:at.round;let a=at.origin;if(Array.isArray(o)&&o.length>=2){let[t,e,r]=o.map(Number);a=[Number.isNaN(t)?0:t,Number.isNaN(e)?0:e,Number.isNaN(r)?0:r]}return this.round=n,this.origin=a,this}get bbox(){return jt(this.segments)}get length(){return Et(this.segments)}getBBox(){return this.bbox}getTotalLength(){return this.length}getPointAtLength(t){return Gt(this.segments,t)}toAbsolute(){let{segments:t}=this;return this.segments=Ct(t),this}toRelative(){let{segments:t}=this;return this.segments=kt(t),this}toCurve(){let{segments:t}=this;return this.segments=Bt(t),this}reverse(t){let{segments:e}=this,r=ce(e),i=r.length>1&&r,n=i?i.map(((e,r)=>t?r?le(e):e.slice(0):le(e))):e.slice(0),s=[];return s=i?n.flat(1):t?e:le(e),this.segments=s.slice(0),this}normalize(){let{segments:t}=this;return this.segments=Rt(t),this}optimize(){let{segments:t}=this,e="off"===this.round?2:this.round;return this.segments=ue(t,e),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((e=>e in t)))return this;let{segments:e,origin:[r,i,n]}=this,s={};for(let[e,r]of Object.entries(t))"skew"===e&&Array.isArray(r)||("rotate"===e||"translate"===e||"origin"===e||"scale"===e)&&Array.isArray(r)?s[e]=r.map(Number):"origin"!==e&&"number"==typeof Number(r)&&(s[e]=Number(r));let{origin:o}=s;if(Array.isArray(o)&&o.length>=2){let[t,e,a]=o.map(Number);s.origin=[Number.isNaN(t)?r:t,Number.isNaN(e)?i:e,a||n]}else s.origin=[r,i,n];return this.segments=me(e,s),this}flipX(){let{cx:t,cy:e}=this.bbox;return this.transform({rotate:[0,180,0],origin:[t,e,0]}),this}flipY(){let{cx:t,cy:e}=this.bbox;return this.transform({rotate:[180,0,0],origin:[t,e,0]}),this}toString(){return It(this.segments,this.round)}dispose(){Object.keys(this).forEach((t=>delete this[t]))}static get options(){return at}static get CSSMatrix(){return A}static get arcTools(){return I}static get bezierTools(){return H}static get cubicTools(){return J}static get lineTools(){return z}static get polygonTools(){return nt}static get quadTools(){return it}static get pathToAbsolute(){return Ct}static get pathToRelative(){return kt}static get pathToCurve(){return Bt}static get pathToString(){return It}static get distanceSquareRoot(){return S}static get midPoint(){return M}static get rotateVector(){return st}static get roundTo(){return ot}static get parsePathString(){return At}static get finalizeSegment(){return ut}static get invalidPathValue(){return gt}static get isArcCommand(){return _t}static get isDigit(){return dt}static get isDigitStart(){return yt}static get isMoveCommand(){return bt}static get isPathCommand(){return wt}static get isSpace(){return ft}static get paramsCount(){return ht}static get paramsParser(){return qt}static get pathParser(){return xt}static get scanFlag(){return ct}static get scanParam(){return mt}static get scanSegment(){return vt}static get skipSpaces(){return pt}static get distanceEpsilon(){return Tt}static get getClosestPoint(){return Vt}static get getDrawDirection(){return Ht}static get getPathArea(){return Ut}static get getPathBBox(){return jt}static get getPointAtLength(){return Gt}static get getPropertiesAtLength(){return Qt}static get getPropertiesAtPoint(){return Zt}static get getSegmentAtLength(){return Ft}static get getSegmentOfPoint(){return Xt}static get getTotalLength(){return Et}static get isAbsoluteArray(){return Wt}static get isCurveArray(){return Kt}static get isNormalizedArray(){return Jt}static get isPathArray(){return Yt}static get isPointInStroke(){return te}static get isRelativeArray(){return ee}static get isValidPath(){return re}static get shapeParams(){return ie}static get shapeToPath(){return oe}static get shapeToPathArray(){return se}static get absolutizeSegment(){return Mt}static get arcToCubic(){return Dt}static get getSVGMatrix(){return de}static get iterate(){return St}static get lineToCubic(){return Pt}static get normalizePath(){return Rt}static get normalizeSegment(){return Lt}static get optimizePath(){return ue}static get projection2d(){return ge}static get quadToCubic(){return Ot}static get relativizeSegment(){return $t}static get reverseCurve(){return fe}static get reversePath(){return le}static get roundPath(){return pe}static get roundSegment(){return he}static get segmentToCubic(){return Nt}static get shortenSegment(){return ae}static get splitCubic(){return we}static get splitPath(){return ce}static get transformPath(){return me}};class _e{constructor({svg:t,type:e,window:r}){this._svg=t,this._type=e,this._window=r}draw(t,e,r,i){let n;switch(this._type){case"dots":n=this._drawDot;break;case"classy":n=this._drawClassy;break;case"classy-rounded":n=this._drawClassyRounded;break;case"rounded":n=this._drawRounded;break;case"extra-rounded":n=this._drawExtraRounded;break;default:n=this._drawSquare}n.call(this,{x:t,y:e,size:r,getNeighbor:i})}_rotatePathD({x:t,y:e,size:r,rotation:i=0,originalD:n}){return new ye(n).transform({rotate:180*i/Math.PI,origin:[t+r/2,e+r/2]}).toString()}_basicDot(t){const{size:e,x:r,y:i}=t,n=e/2,s=`M ${r+n-n} ${i+n} a ${n} ${n} 0 1 0 ${2*n} 0 a ${n} ${n} 0 1 0 ${-2*n} 0 `;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:s})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicSquare(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} h ${e} v ${e} h ${-e} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicSideRounded(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} v ${e} h ${e/2} a ${e/2} ${e/2}, 0, 0, 0, 0 ${-e} h ${-e/2} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicCornerRounded(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} v ${e} h ${e} v ${-e/2} a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2} h ${-e/2} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicCornerExtraRounded(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} v ${e} h ${e} a ${e} ${e}, 0, 0, 0, ${-e} ${-e} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicCornersRounded(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} v ${e/2} a ${e/2} ${e/2}, 0, 0, 0, ${e/2} ${e/2} h ${e/2} v ${-e/2} a ${e/2} ${e/2}, 0, 0, 0, ${-e/2} ${-e/2} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_drawDot({x:t,y:e,size:r}){this._basicDot({x:t,y:e,size:r,rotation:0})}_drawSquare({x:t,y:e,size:r}){this._basicSquare({x:t,y:e,size:r,rotation:0})}_drawRounded({x:t,y:e,size:r,getNeighbor:i}){const n=i?+i(-1,0):0,s=i?+i(1,0):0,o=i?+i(0,-1):0,a=i?+i(0,1):0,h=n+s+o+a;if(0!==h)if(h>2||n&&s||o&&a)this._basicSquare({x:t,y:e,size:r,rotation:0});else{if(2===h){let i=0;return n&&o?i=Math.PI/2:o&&s?i=Math.PI:s&&a&&(i=-Math.PI/2),void this._basicCornerRounded({x:t,y:e,size:r,rotation:i})}if(1===h){let i=0;return o?i=Math.PI/2:s?i=Math.PI:a&&(i=-Math.PI/2),void this._basicSideRounded({x:t,y:e,size:r,rotation:i})}}else this._basicDot({x:t,y:e,size:r,rotation:0})}_drawExtraRounded({x:t,y:e,size:r,getNeighbor:i}){const n=i?+i(-1,0):0,s=i?+i(1,0):0,o=i?+i(0,-1):0,a=i?+i(0,1):0,h=n+s+o+a;if(0!==h)if(h>2||n&&s||o&&a)this._basicSquare({x:t,y:e,size:r,rotation:0});else{if(2===h){let i=0;return n&&o?i=Math.PI/2:o&&s?i=Math.PI:s&&a&&(i=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:i})}if(1===h){let i=0;return o?i=Math.PI/2:s?i=Math.PI:a&&(i=-Math.PI/2),void this._basicSideRounded({x:t,y:e,size:r,rotation:i})}}else this._basicDot({x:t,y:e,size:r,rotation:0})}_drawClassy({x:t,y:e,size:r,getNeighbor:i}){const n=i?+i(-1,0):0,s=i?+i(1,0):0,o=i?+i(0,-1):0,a=i?+i(0,1):0;0!==n+s+o+a?n||o?s||a?this._basicSquare({x:t,y:e,size:r,rotation:0}):this._basicCornerRounded({x:t,y:e,size:r,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:e,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:e,size:r,rotation:Math.PI/2})}_drawClassyRounded({x:t,y:e,size:r,getNeighbor:i}){const n=i?+i(-1,0):0,s=i?+i(1,0):0,o=i?+i(0,-1):0,a=i?+i(0,1):0;0!==n+s+o+a?n||o?s||a?this._basicSquare({x:t,y:e,size:r,rotation:0}):this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:e,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:e,size:r,rotation:Math.PI/2})}}const be={dot:"dot",square:"square",extraRounded:"extra-rounded"},ve=Object.values(be);class xe{constructor({svg:t,type:e,window:r}){this._svg=t,this._type=e,this._window=r}draw(t,e,r,i){let n;switch(this._type){case be.square:n=this._drawSquare;break;case be.extraRounded:n=this._drawExtraRounded;break;default:n=this._drawDot}n.call(this,{x:t,y:e,size:r,rotation:i})}_rotatePathD({x:t,y:e,size:r,rotation:i=0,originalD:n}){return new ye(n).transform({rotate:180*i/Math.PI,origin:[t+r/2,e+r/2]}).toString()}_basicDot(t){const{size:e,x:r,y:i}=t,n=e/7,s=`M ${r+e/2} ${i} a ${e/2} ${e/2} 0 1 0 0.1 0 Z m 0 ${n} a ${e/2-n} ${e/2-n} 0 1 1 -0.1 0 Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:s})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicSquare(t){const{size:e,x:r,y:i}=t,n=e/7,s=`M ${r} ${i} v ${e} h ${e} v ${-e} Z M ${r+n} ${i+n} h ${e-2*n} v ${e-2*n} h ${2*n-e} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:s})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicExtraRounded(t){const{size:e,x:r,y:i}=t,n=e/7,s=`M ${r} ${i+2.5*n} v ${2*n} a ${2.5*n} ${2.5*n}, 0, 0, 0, ${2.5*n} ${2.5*n} h ${2*n} a ${2.5*n} ${2.5*n}, 0, 0, 0, ${2.5*n} ${2.5*-n} v ${-2*n} a ${2.5*n} ${2.5*n}, 0, 0, 0, ${2.5*-n} ${2.5*-n} h ${-2*n} a ${2.5*n} ${2.5*n}, 0, 0, 0, ${2.5*-n} ${2.5*n} Z M ${r+2.5*n} ${i+n} h ${2*n} a ${1.5*n} ${1.5*n}, 0, 0, 1, ${1.5*n} ${1.5*n} v ${2*n} a ${1.5*n} ${1.5*n}, 0, 0, 1, ${1.5*-n} ${1.5*n} h ${-2*n} a ${1.5*n} ${1.5*n}, 0, 0, 1, ${1.5*-n} ${1.5*-n} v ${-2*n} a ${1.5*n} ${1.5*n}, 0, 0, 1, ${1.5*n} ${1.5*-n} Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:s})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_drawDot({x:t,y:e,size:r,rotation:i}){this._basicDot({x:t,y:e,size:r,rotation:i})}_drawSquare({x:t,y:e,size:r,rotation:i}){this._basicSquare({x:t,y:e,size:r,rotation:i})}_drawExtraRounded({x:t,y:e,size:r,rotation:i}){this._basicExtraRounded({x:t,y:e,size:r,rotation:i})}}const Ae={dot:"dot",square:"square"},Me=Object.values(Ae);class Se{constructor({svg:t,type:e,window:r}){this._svg=t,this._type=e,this._window=r}draw(t,e,r,i){let n;n=this._type===Ae.square?this._drawSquare:this._drawDot,n.call(this,{x:t,y:e,size:r,rotation:i})}_rotatePathD({x:t,y:e,size:r,rotation:i=0,originalD:n}){return new ye(n).transform({rotate:180*i/Math.PI,origin:[t+r/2,e+r/2]}).toString()}_basicDot(t){const{size:e,x:r,y:i}=t,n=e/2,s=`M ${r+n-n} ${i+n} \n      a ${n} ${n} 0 1 0 ${2*n} 0  \n      a ${n} ${n} 0 1 0 ${-2*n} 0`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:s})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_basicSquare(t){const{size:e,x:r,y:i}=t,n=`M ${r} ${i} \n      h ${e} \n      v ${e} \n      h ${-e} \n      Z`;this._d=this._rotatePathD(Object.assign(Object.assign({},t),{originalD:n})),this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("stroke","inherit"),this._element.setAttribute("stroke-width","inherit"),this._element.setAttribute("d",this._d)}_drawDot({x:t,y:e,size:r,rotation:i}){this._basicDot({x:t,y:e,size:r,rotation:i})}_drawSquare({x:t,y:e,size:r,rotation:i}){this._basicSquare({x:t,y:e,size:r,rotation:i})}}const Ce="circle",$e=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],ke=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class ze{constructor(t,e,r){this._roundSize=t=>this._options.dotsOptions.roundSize?Math.floor(t):t,this._window=e,this._qr=r,this._count=this._qr.getModuleCount(),this._dotSize=10*t.scale,this._margin=t.margin*t.scale,this._imageMargin=t.imageOptions.margin*t.scale,this._strokeWidth=t.strokeWidth*t.scale,this._size=this._count*this._dotSize+2*this._margin;const i=Math.ceil(this._count*Math.sqrt(2));this._fakeCount=(i-this._count)%2==0?i:i+1,this._fakeSize=this._fakeCount*this._dotSize+2*this._margin,this._totalSize=t.shape===Ce?this._fakeSize:this._size,this._start=t.shape===Ce?(this._fakeCount-this._count)/2*this._dotSize+this._margin:this._margin||0,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(this._totalSize)),this._element.setAttribute("height",String(this._totalSize)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${this._totalSize} ${this._totalSize}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=t.image,this._instanceId=ze.instanceCount++,this._options=t}get width(){return this._size}get height(){return this._size}getElement(){return this._element}async drawQR(){let t={hideXDots:0,hideYDots:0,width:0,height:0};if(this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:e,qrOptions:r}=this._options,i=e.imageSize*s[r.errorCorrectionLevel],n=Math.floor(i*this._count*this._count);t=function({originalHeight:t,originalWidth:e,maxHiddenDots:r,maxHiddenAxisDots:i,dotSize:n}){const s={x:0,y:0},o={x:0,y:0};if(t<=0||e<=0||r<=0||n<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const a=t/e;return s.x=Math.floor(Math.sqrt(r/a)),s.x<=0&&(s.x=1),i&&i<s.x&&(s.x=i),s.x%2==0&&s.x--,o.x=s.x*n,s.y=1+2*Math.ceil((s.x*a-1)/2),o.y=Math.round(o.x*a),(s.y*s.x>r||i&&i<s.y)&&(i&&i<s.y?(s.y=i,s.y%2==0&&s.x--):s.y-=2,o.y=s.y*n,s.x=1+2*Math.ceil((s.y/a-1)/2),o.x=Math.round(o.y/a)),{height:o.y,width:o.x,hideYDots:s.y,hideXDots:s.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:n,maxHiddenAxisDots:this._count-14,dotSize:this._dotSize})}this.drawBackground(),this.drawDots(((e,r)=>{var i,n,s,o,a,h;return!(this._options.imageOptions.hideBackgroundDots&&e>=(this._count-t.hideYDots)/2&&e<(this._count+t.hideYDots)/2&&r>=(this._count-t.hideXDots)/2&&r<(this._count+t.hideXDots)/2||(null===(i=$e[e])||void 0===i?void 0:i[r])||(null===(n=$e[e-this._count+7])||void 0===n?void 0:n[r])||(null===(s=$e[e])||void 0===s?void 0:s[r-this._count+7])||(null===(o=ke[e])||void 0===o?void 0:o[r])||(null===(a=ke[e-this._count+7])||void 0===a?void 0:a[r])||(null===(h=ke[e])||void 0===h?void 0:h[r-this._count+7]))})),this.drawCorners(),this._options.image&&await this.drawImage({width:t.width,height:t.height})}drawBackground(){var t,e,r;const i=this._element,n=this._options;if(i){const i=null===(t=n.backgroundOptions)||void 0===t?void 0:t.gradient,s=null===(e=n.backgroundOptions)||void 0===e?void 0:e.color;if(i||s){const t=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundGroup=this._window.document.createElementNS("http://www.w3.org/2000/svg","g"),this._backgroundGroup.setAttribute("id",`background-group-${this._instanceId}`),this._element.appendChild(this._backgroundGroup),(null===(r=n.backgroundOptions)||void 0===r?void 0:r.round)&&t.setAttribute("rx",String(this._size/2*n.backgroundOptions.round)),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width",String(this._size)),t.setAttribute("height",String(this._size)),this._backgroundGroup.appendChild(t),this._createColor({element:this._backgroundGroup,options:i,color:s,additionalRotation:0,x:0,y:0,height:this._size,width:this._size,name:`background-color-${this._instanceId}`})}}}drawDots(t){var e,r;if(!this._qr)throw"QR code is not defined";const i=this._options,n=this._start,s=this._start,o=new _e({svg:this._element,type:i.dotsOptions.type,window:this._window}),a=[],h=[];this._dotsGroup=this._window.document.createElementNS("http://www.w3.org/2000/svg","g"),this._dotsGroup.setAttribute("id",`dots-group-${this._instanceId}`),this._dotsGroup.setAttribute("stroke","black"),this._dotsGroup.setAttribute("stroke-width",`${this._strokeWidth}px`),this._element.appendChild(this._dotsGroup),this._createColor({element:this._dotsGroup,options:null===(e=i.dotsOptions)||void 0===e?void 0:e.gradient,color:i.dotsOptions.color,additionalRotation:0,x:0,y:0,height:this._size,width:this._size,name:`dots-color-${this._instanceId}`});for(let e=0;e<this._count;e++)for(let i=0;i<this._count;i++)t&&!t(e,i)||(null===(r=this._qr)||void 0===r?void 0:r.isDark(e,i))&&(o.draw(n+i*this._dotSize,s+e*this._dotSize,this._dotSize,((r,n)=>!(i+r<0||e+n<0||i+r>=this._count||e+n>=this._count)&&!(t&&!t(e+n,i+r))&&!!this._qr&&this._qr.isDark(e+n,i+r))),o._element&&o._d&&(a.push(o._d),h.push(o._element)));if(i.shape===Ce){const t=(this._fakeCount-this._count)/2,e=this._margin||0,r=this._margin||0,i=[],n=this._roundSize(this._fakeCount/2);for(let e=0;e<this._fakeCount;e++){i[e]=[];for(let r=0;r<this._fakeCount;r++)e>=t-1&&e<=this._fakeCount-t&&r>=t-1&&r<=this._fakeCount-t||Math.sqrt((e-n)*(e-n)+(r-n)*(r-n))>n?i[e][r]=0:i[e][r]=this._qr.isDark(r-2*t<0?r:r>=this._count?r-2*t:r-t,e-2*t<0?e:e>=this._count?e-2*t:e-t)?1:0}for(let t=0;t<this._fakeCount;t++)for(let n=0;n<this._fakeCount;n++)i[t][n]&&(o.draw(e+n*this._dotSize,r+t*this._dotSize,this._dotSize,((e,r)=>{var s;return!!(null===(s=i[t+r])||void 0===s?void 0:s[n+e])})),o._element&&o._d&&(a.push(o._d),h.push(o._element)))}if(i.mergePaths){const t=this._window.document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",a.join(" ")),this._dotsGroup.appendChild(t)}else h.forEach((t=>{this._dotsGroup&&this._dotsGroup.appendChild(t)}))}drawCorners(){if(!this._qr)throw"QR code is not defined";const t=this._element,e=this._options;if(!t)throw"Element code is not defined";const r=7*this._dotSize,i=3*this._dotSize,n=this._start,s=this._start;[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((([t,o,a])=>{var h,u,l,c,d,g,m,f,p,w;const y=n+t*this._dotSize*(this._count-7),_=s+o*this._dotSize*(this._count-7);this._cornersSquareGroup=this._window.document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornersSquareGroup.setAttribute("id",`corners-square-group-${t}-${o}-${this._instanceId}`),this._cornersSquareGroup.setAttribute("stroke","black"),this._cornersSquareGroup.setAttribute("stroke-width",`${this._strokeWidth}px`),this._element.appendChild(this._cornersSquareGroup);const b=[],v=[];if(this._createColor({element:this._cornersSquareGroup,options:null===(h=e.cornersSquareOptions)||void 0===h?void 0:h.gradient,color:null===(u=e.cornersSquareOptions)||void 0===u?void 0:u.color,additionalRotation:a,x:y,y:_,height:r,width:r,name:`corners-square-color-${t}-${o}-${this._instanceId}`}),(null===(l=e.cornersSquareOptions)||void 0===l?void 0:l.type)&&ve.includes(e.cornersSquareOptions.type)){const t=new xe({svg:this._element,type:e.cornersSquareOptions.type,window:this._window});t.draw(y,_,r,a),t._element&&t._d&&(b.push(t._d),v.push(t._element))}else{const t=new _e({svg:this._element,type:(null===(c=e.cornersSquareOptions)||void 0===c?void 0:c.type)||e.dotsOptions.type,window:this._window});for(let e=0;e<$e.length;e++)for(let r=0;r<$e[e].length;r++)(null===(d=$e[e])||void 0===d?void 0:d[r])&&(t.draw(y+r*this._dotSize,_+e*this._dotSize,this._dotSize,((t,i)=>{var n;return!!(null===(n=$e[e+i])||void 0===n?void 0:n[r+t])})),t._element&&t._d&&(b.push(t._d),v.push(t._element)))}if(e.mergePaths){const t=this._window.document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",b.join(" ")),this._cornersSquareGroup.appendChild(t)}else v.forEach((t=>{this._cornersSquareGroup&&this._cornersSquareGroup.appendChild(t)}));if(this._cornersDotGroup=this._window.document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornersDotGroup.setAttribute("id",`corners-dot-group-${t}-${o}-${this._instanceId}`),this._cornersDotGroup.setAttribute("stroke","black"),this._cornersDotGroup.setAttribute("stroke-width",`${this._strokeWidth}px`),this._element.appendChild(this._cornersDotGroup),this._createColor({element:this._cornersDotGroup,options:null===(g=e.cornersDotOptions)||void 0===g?void 0:g.gradient,color:null===(m=e.cornersDotOptions)||void 0===m?void 0:m.color,additionalRotation:a,x:y+2*this._dotSize,y:_+2*this._dotSize,height:i,width:i,name:`corners-dot-color-${t}-${o}-${this._instanceId}`}),(null===(f=e.cornersDotOptions)||void 0===f?void 0:f.type)&&Me.includes(e.cornersDotOptions.type)){const t=new Se({svg:this._element,type:e.cornersDotOptions.type,window:this._window});t.draw(y+2*this._dotSize,_+2*this._dotSize,i,a),t._element&&this._cornersDotGroup&&this._cornersDotGroup.appendChild(t._element)}else{const t=new _e({svg:this._element,type:(null===(p=e.cornersDotOptions)||void 0===p?void 0:p.type)||e.dotsOptions.type,window:this._window}),r=[],i=[];for(let e=0;e<ke.length;e++)for(let n=0;n<ke[e].length;n++)(null===(w=ke[e])||void 0===w?void 0:w[n])&&(t.draw(y+n*this._dotSize,_+e*this._dotSize,this._dotSize,((t,r)=>{var i;return!!(null===(i=ke[e+r])||void 0===i?void 0:i[n+t])})),t._element&&t._d&&(r.push(t._d),i.push(t._element)));if(e.mergePaths){const t=this._window.document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",r.join(" ")),this._cornersDotGroup.appendChild(t)}else i.forEach((t=>{this._cornersDotGroup&&this._cornersDotGroup.appendChild(t)}))}}))}loadImage(){return new Promise(((t,e)=>{const r=this._options;if(!r.image)return e("Image is not defined");const i=new this._window.Image;"string"==typeof r.imageOptions.crossOrigin&&(i.crossOrigin=r.imageOptions.crossOrigin),this._image=i,i.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(t,e){return new Promise((r=>{const i=new e.XMLHttpRequest;i.onload=function(){const t=new e.FileReader;t.onloadend=function(){r(t.result)},t.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.send()}))}(r.image||"",this._window)),t()},i.src=r.image}))}async drawImage({width:t,height:e}){const r=this._totalSize/2-t/2+this._imageMargin,i=this._totalSize/2-e/2+this._imageMargin,n=t-2*this._imageMargin,s=e-2*this._imageMargin,o=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttribute("href",this._imageUri||""),o.setAttribute("xlink:href",this._imageUri||""),o.setAttribute("x",String(r)),o.setAttribute("y",String(i)),o.setAttribute("width",`${n}px`),o.setAttribute("height",`${s}px`),this._element.appendChild(o)}_createColor({element:t,options:e,color:r,additionalRotation:i,x:n,y:s,height:o,width:a,name:h}){const u=a>o?a:o;if(e){let r;if("radial"===e.type)r=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),r.setAttribute("id",h),r.setAttribute("gradientUnits","userSpaceOnUse"),r.setAttribute("fx",String(n+a/2)),r.setAttribute("fy",String(s+o/2)),r.setAttribute("cx",String(n+a/2)),r.setAttribute("cy",String(s+o/2)),r.setAttribute("r",String(u/2));else{const t=((e.rotation||0)+i)%(2*Math.PI),u=(t+2*Math.PI)%(2*Math.PI);let l=n+a/2,c=s+o/2,d=n+a/2,g=s+o/2;u>=0&&u<=.25*Math.PI||u>1.75*Math.PI&&u<=2*Math.PI?(l-=a/2,c-=o/2*Math.tan(t),d+=a/2,g+=o/2*Math.tan(t)):u>.25*Math.PI&&u<=.75*Math.PI?(c-=o/2,l-=a/2/Math.tan(t),g+=o/2,d+=a/2/Math.tan(t)):u>.75*Math.PI&&u<=1.25*Math.PI?(l+=a/2,c+=o/2*Math.tan(t),d-=a/2,g-=o/2*Math.tan(t)):u>1.25*Math.PI&&u<=1.75*Math.PI&&(c+=o/2,l+=a/2/Math.tan(t),g-=o/2,d-=a/2/Math.tan(t)),r=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),r.setAttribute("id",h),r.setAttribute("gradientUnits","userSpaceOnUse"),r.setAttribute("x1",String(Math.round(l))),r.setAttribute("y1",String(Math.round(c))),r.setAttribute("x2",String(Math.round(d))),r.setAttribute("y2",String(Math.round(g)))}e.colorStops.forEach((({offset:t,color:e})=>{const i=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset",100*t+"%"),i.setAttribute("stop-color",e),r.appendChild(i)})),t.setAttribute("fill",`url('#${h}')`),this._defs.appendChild(r)}else r&&t.setAttribute("fill",r)}}ze.instanceCount=0;const De=ze,Oe="canvas",Pe={};for(let t=0;t<=40;t++)Pe[t]=t;const Ne={type:Oe,shape:"square",scale:1,strokeWidth:0,data:"",mergePaths:!0,margin:0,qrOptions:{typeNumber:Pe[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function Le(t){const e=Object.assign({},t);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map((t=>Object.assign(Object.assign({},t),{offset:Number(t.offset)}))),e}function qe(t){const e=Object.assign({},t);return e.margin=Number(e.margin),e.imageOptions=Object.assign(Object.assign({},e.imageOptions),{hideBackgroundDots:Boolean(e.imageOptions.hideBackgroundDots),imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.dotsOptions=Object.assign({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=Le(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=Object.assign({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=Le(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=Object.assign({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=Le(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=Object.assign({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=Le(e.backgroundOptions.gradient))),e}var Be=r(873),Ie=r.n(Be);function je(t){if(!t)throw new Error("Extension must be defined");"."===t[0]&&(t=t.substring(1));const e={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[t.toLowerCase()];if(!e)throw new Error(`Extension "${t}" is not supported`);return e}class Ee{constructor(t){(null==t?void 0:t.jsdom)?this._window=new t.jsdom("",{resources:"usable"}).window:this._window=window,this._options=t?qe(e(Ne,t)):Ne,this.update()}static _clearContainer(t){t&&(t.innerHTML="")}_setupSvg(){if(!this._qr)return;const t=new De(this._options,this._window,this._qr);this._svg=t.getElement(),this._svgDrawingPromise=t.drawQR().then((()=>{var e;this._svg&&(null===(e=this._extension)||void 0===e||e.call(this,t.getElement(),this._options))})),this._size=t._totalSize}_setupCanvas(t=!0){var e;this._qr&&(t&&this._setupSvg(),this._size&&(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._size,this._domCanvas.height=this._size,this._canvasDrawingPromise=null===(e=this._svgDrawingPromise)||void 0===e?void 0:e.then((()=>{if(!this._svg)return;const t=this._svg,e=(new this._window.XMLSerializer).serializeToString(t),r=btoa(e),i=`data:${je("svg")};base64,${r}`,n=new this._window.Image;return new Promise((t=>{n.onload=()=>{var e,r;null===(r=null===(e=this._domCanvas)||void 0===e?void 0:e.getContext("2d"))||void 0===r||r.drawImage(n,0,0),t()},n.src=i}))}))))}async _getElement(t="png"){if(!this._qr)throw"QR code is empty";return"svg"===t.toLowerCase()?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):(this._domCanvas&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas)}update(t){Ee._clearContainer(this._container),this._options=t?qe(e(this._options,t)):this._options,this._options.data&&(this._qr=Ie()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===Oe?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===Oe?this._domCanvas&&t.appendChild(this._domCanvas):this._svg&&t.appendChild(this._svg),this._container=t}}applyExtension(t){if(!t)throw"Extension function should be defined.";this._extension=t,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(t="png"){if(!this._qr)throw"QR code is empty";const e=await this._getElement(t),r=je(t);if(!e)return null;if("svg"===t.toLowerCase()){const t=`<?xml version="1.0" standalone="no"?>\r\n${(new this._window.XMLSerializer).serializeToString(e)}`;return"undefined"==typeof Blob||this._options.jsdom?Buffer.from(t):new Blob([t],{type:r})}return new Promise((t=>{"toBlob"in e&&e.toBlob(t,r,1)}))}async download(t){if(!this._qr)throw"QR code is empty";if("undefined"==typeof Blob)throw"Cannot download in Node.js, call getRawData instead.";let e="png",r="qr";"object"==typeof t&&null!==t&&(t.name&&(r=t.name),t.extension&&(e=t.extension)),this._setupCanvas(!1),await this._canvasDrawingPromise;const i=await this._getElement(e);if(i&&this._size)switch(e.toLowerCase()){case"svg":{let t=(new XMLSerializer).serializeToString(i);t='<?xml version="1.0" standalone="no"?>\r\n'+t;const e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});n(URL.createObjectURL(e),`${r}.svg`);break}case"jpeg":if(this._options.backgroundOptions.color||this._options.backgroundOptions.gradient)i.toBlob((t=>{t&&n(URL.createObjectURL(t),`${r}.${e}`)}),je(e));else{const t=document.createElement("canvas");t.width=this._size,t.height=this._size;const s=t.getContext("2d");if(!s)return;s.fillStyle=this._options.emptyPixelsColor||"#ffffff",s.fillRect(0,0,t.width,t.height),s.drawImage(i,0,0),t.toBlob((t=>{t&&n(URL.createObjectURL(t),`${r}.${e}`)}),je(e))}break;default:i.toBlob((t=>{t&&n(URL.createObjectURL(t),`${r}.${e}`)}),je(e))}}}const Te=Ee})(),i.default})()));
//# sourceMappingURL=qr-code-styling.js.map